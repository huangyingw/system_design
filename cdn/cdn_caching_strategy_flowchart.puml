@startuml CDN Caching Strategy Flowchart
!define RECTANGLE class

skinparam backgroundColor #FEFEFE
skinparam handwritten false
skinparam defaultFontName Arial

title CDN Caching Strategy Flowchart

start

:User requests content;

if (Content in edge cache?) then (yes)
  :Serve from edge cache;
else (no)
  if (Content in regional cache?) then (yes)
    :Fetch from regional cache;
    :Update edge cache;
  else (no)
    if (Content in central cache?) then (yes)
      :Fetch from central cache;
      :Update regional and edge cache;
    else (no)
      :Fetch from origin server;
      :Update all cache levels;
    endif
  endif
endif

:Serve content to user;

if (Cache expiration check) then (expired)
  :Validate with origin server;
  if (Content changed?) then (yes)
    :Update cache;
  else (no)
    :Extend cache TTL;
  endif
else (not expired)
  :Keep in cache;
endif

stop

@enduml
