@startuml CDN Detailed Architecture
!define RECTANGLE class

skinparam backgroundColor #F0F8FF
skinparam handwritten false
skinparam defaultFontName Arial
skinparam ArrowColor #2C3E50
skinparam NoteBackgroundColor #D5E8D4
skinparam NoteBorderColor #82B366

title CDN Detailed Architecture

rectangle "User" as user #FFD700
rectangle "DNS" as dns #87CEFA

package "CDN Network" {
    rectangle "Edge Node" as edge #98FB98
    rectangle "Regional Node" as regional #FFA07A
    rectangle "Central Node" as central #DDA0DD
}

rectangle "Origin Server" as origin #F0E68C

user -[#FF6347]-> dns : 1. DNS query
dns -[#FF6347]-> user : 2. Return CDN edge node IP
user -[#4169E1]-> edge : 3. Content request
edge -[#32CD32]-> regional : 4. If not in edge cache
regional -[#FF8C00]-> central : 5. If not in regional cache
central -[#8A2BE2]-> origin : 6. If not in central cache
origin -[#8A2BE2]-> central : 7. Return content
central -[#FF8C00]-> regional : 8. Cache and forward
regional -[#32CD32]-> edge : 9. Cache and forward
edge -[#4169E1]-> user : 10. Serve content

note right of edge
  Closest to end users
  Handles most requests
end note

note right of regional
  Aggregates multiple edge nodes
  Larger cache capacity
end note

note right of central
  Connects to origin
  Global load balancing
end note

@enduml
