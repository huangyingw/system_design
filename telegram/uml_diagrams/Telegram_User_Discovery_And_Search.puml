@startuml Telegram_User_Discovery_And_Search
!define RECTANGLE class

skinparam backgroundColor #FEFEFE
skinparam handwritten false
skinparam monochrome true
skinparam packageStyle rectangle
skinparam defaultFontName Arial
skinparam defaultFontSize 14

RECTANGLE "Client" {
    [Search Interface]
    [User Profile]
}

RECTANGLE "Search Service" {
    [Query Parser]
    [Search Engine]
    [Result Ranker]
}

database "User Database" {
    [User Profiles]
    [Contact Lists]
}

RECTANGLE "Recommendation Engine" {
    [Collaborative Filtering]
    [Content-Based Filtering]
}

RECTANGLE "Elasticsearch Cluster" {
    [User Index]
    [Group/Channel Index]
}

RECTANGLE "Analytics Service" {
    [User Behavior Tracker]
    [Trend Analyzer]
}

Client --> "Search Service" : Submit search query
"Search Service" --> "Elasticsearch Cluster" : Query indexes
"Search Service" --> "User Database" : Fetch user data
"Search Service" <-- "Recommendation Engine" : Get recommendations
"Recommendation Engine" <-- "Analytics Service" : Get user behavior data
"Search Service" --> Client : Return search results

@enduml
