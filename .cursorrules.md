# .cursorrules 规则说明

## 1. 语言设置
- **语言**: 中文

## 2. 终端设置 (Terminal)

- **使用的 shell**: zsh
- **命令执行设置**:
  - 默认 shell: `/bin/zsh`
  - 环境设置:
    - 所有终端命令均使用 zsh
    - 确保工具的 PATH 设置正确
    - 必要时使用绝对路径
  - 错误处理:
    - 捕获输出
    - 检查退出状态
    - 如果命令执行失败，则会重试，重试策略为使用修改后的命令重试

## 3. PlantUML 设置

### 3.1 标准 (Standards)

- **组件 (Components)**:
  - **容器样式**: 使用矩形
  - **组件定义**: 内部定义使用 component
  - **连接处理**: 组件仅放在容器内，连接则在容器外处理
  - **缓存标注**: 使用键值对为缓存组件添加标注

- **布局 (Layout)**:
  - **背景**: 使用浅色背景以增强可读性
  - **分组**: 进行逻辑组件分组
  - **连接**: 尽量减少连接交叉，保持图形清晰
  - **备注**: 保持位置一致，文本清晰

- **颜色 (Colors)**:
  - **主流程**: 深橙色
  - **次流程**: 深蓝色
  - **辅助流程**: 深黄色
  - **管理相关**: 深紫色
  - **监控相关**: 深青色

### 3.2 设计原则 (Design Principles)

- 优先考虑图形的可读性和清晰度
- 注重系统交互与数据流向的展示
- 包含性能相关的考虑
- 展示系统的可扩展性
- 强调安全措施

### 3.3 质量控制 (Quality Control)

- **检查时机**: 每次生成或修改后执行检查
- **验证步骤**:
  - 语法验证
  - 组件之间的关系检查
  - 风格符合度验证
  - 图表结构检查
  - 文本一致性检查

- **自动修复 (AutoFix)**:
  - 启用自动修复功能
  - 修复优先级:
    - 语法错误
    - 连接问题
    - 风格违规
  - 修复后会进行验证以确保正确性

## 4. 规则 (Rules)

- 对于所有匹配 `*.puml` 的文件，系统会执行以下命令:
  - **命令**: `./check_puml.sh ${file}`
  - **触发条件**: 文件保存时 (save) 