@startuml
' ==================== Metadata ====================
' @category: database
' @tags: #database
' @application: General
' @tech-stack: General
' @pattern: Architecture
' @description: Dynamodb Distributed Storage System With Partitioning Consistency Models Streams And Lambda Integration
' ==================================================

skinparam componentStyle rectangle
skinparam backgroundColor #FAFAFA
skinparam defaultFontSize 14
skinparam defaultFontName Arial
skinparam ArrowColor #2C3E50
skinparam PackageBackgroundColor #FAFAFA
skinparam PackageBorderColor #CCCCCC

title DynamoDB-based Distributed Data Storage System

package "Client Layer" {
    component "Web Application" as WebApp
    component "Mobile Application" as MobileApp
    component "IoT Device" as IoTDevice
}

package "API Gateway" {
    component "Request Routing" as RequestRouting
    component "Authentication" as Auth
    component "Traffic Control" as TrafficControl
}

package "Application Service" {
    component "Business Logic" as BusinessLogic
    component "Data Access Layer" as DataAccessLayer
}

package "DynamoDB" {
    component "Table Design" as TableDesign
    component "Partition Strategy" as PartitionStrategy
    component "Consistency Model" as ConsistencyModel
}

package "DynamoDB Streams" {
    component "Change Capture" as ChangeCapture
    component "Event Processing" as EventProcessing
}

package "Lambda Functions" {
    component "Stream Processing" as StreamProcessing
    component "Data Transformation" as DataTransformation
    component "Triggers" as Triggers
}

package "Cache Layer" {
    component "ElastiCache" as ElastiCache
    component "DAX" as DAX
}

package "Data Analysis" {
    component "Athena" as Athena
    component "Redshift" as Redshift
}

package "Monitoring" {
    component "CloudWatch" as CloudWatch
    component "AWS Config" as AWSConfig
}

package "Security" {
    component "IAM" as IAM
    component "KMS" as KMS
    component "VPC" as VPC
}

WebApp --> RequestRouting : 1. API Request
MobileApp --> RequestRouting
IoTDevice --> RequestRouting

RequestRouting --> BusinessLogic : 2. Route Request
Auth --> BusinessLogic
TrafficControl --> BusinessLogic

BusinessLogic --> TableDesign : 3. Query/Update Data
DataAccessLayer --> TableDesign

BusinessLogic --> ElastiCache : 4. Cache Access
BusinessLogic --> DAX

TableDesign ..> ChangeCapture : 5. Stream Changes
ChangeCapture ..> StreamProcessing : 6. Trigger Functions

TableDesign ..> Athena : 7. Analyze Data
TableDesign ..> Redshift

TableDesign ..> CloudWatch : 8. Monitor Performance
TableDesign ..> AWSConfig

IAM --> TableDesign : 9. Secure Access
KMS --> TableDesign
VPC --> TableDesign

@enduml
