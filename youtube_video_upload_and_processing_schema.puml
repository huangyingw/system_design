@startuml YouTube_Video_Upload_Architecture

allowmixing

' 设置整体主题
skinparam backgroundColor #1E1E1E
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam defaultFontColor #FFFFFF
skinparam padding 5
skinparam roundCorner 10

' 定义主要组件
component "User" as user #9CDCFE
component "Web Server" as webserver #4EC9B0
component "Upload Service" as uploadservice #FF6B6B
queue "Upload Queue" as uploadqueue #DCDCAA
component "Transcoding Service" as transcodingservice #CE9178
database "Original Video Storage" as originalstorage #FF6B6B
database "Transcoded Video Storage" as transcodedStorage #FF6B6B
database "Metadata DB" as metadatadb #FF6B6B

' 定义流程
user -[#DCDCAA]-> webserver : 1. Upload video
webserver -[#DCDCAA]-> uploadservice : 2. Process upload
uploadservice -[#DCDCAA]-> uploadqueue : 3. Queue for processing
uploadservice -[#DCDCAA]-> originalstorage : 4. Store original
uploadservice -[#DCDCAA]-> metadatadb : 5. Store metadata
uploadqueue -[#DCDCAA]-> transcodingservice : 6. Dequeue for transcoding
transcodingservice -[#DCDCAA]-> transcodedStorage : 7. Store transcoded versions
transcodingservice -[#DCDCAA]-> metadatadb : 8. Update metadata

' 添加注释
note right of transcodingservice
  Generates multiple versions
  (different resolutions and formats)
end note

@enduml
