@startuml

skinparam backgroundColor #D3D3D3
skinparam defaultFontName "Arial"
skinparam defaultFontSize 16
skinparam note {
    BackgroundColor #FFFFFF
    BorderColor #000000
    FontSize 16
    FontName "Arial"
}

title Real-time Communication Service Architecture

rectangle "Client A" as ClientA
rectangle "Client B" as ClientB

rectangle "Communication Service" as CS {
    rectangle "WebSocket Server" as WSS
    rectangle "Message Queue" as MQ
    rectangle "Message Processor" as MP
}

rectangle "Data Persistence Layer" as DPS {
    rectangle "Message Data (DB)" as MD
    rectangle "User Status Data (Redis)" as USD
}

ClientA -down-> WSS : Opens WebSocket Connection
ClientB -down-> WSS : Opens WebSocket Connection
ClientA -right-> WSS : Sends Message
WSS -down-> MQ : Queues Message
MQ -down-> MP : Processes Message
MP -down-> MD : Stores Message Data
MP -down-> USD : Updates User Status
MP -right-> WSS : Delivers Message
WSS -right-> ClientB : Receives Message

note right of CS
  **Performance Optimization**:
  - Use message queue for high concurrency
  - Optimize WebSocket server performance
  - Use Redis for user status storage
end note

@enduml
