@startuml
skinparam backgroundColor white
skinparam handwritten false
skinparam roundcorner 10
skinparam packageStyle rectangle
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam arrowColor #333333
skinparam linetype ortho
skinparam nodesep 80
skinparam ranksep 100

title Brute-Force Password Cracker System Architecture
caption Optimized for recovering a lost Threads account password

package "Private Cloud Compute Nodes" {
    [Central Coordination Node] as Coordinator
    
    package "Apache Spark Cluster" {
        [Distributed Producer\nNode 1] as DistProducer1
        [Distributed Producer\nNode 2] as DistProducer2
        [Kubernetes Autoscaler] as Autoscaler
        [Consumer Node 3\n(Dynamic)] as DynamicConsumer3
    }
    
    [Central Pub/Sub\nMessaging System] as PubSub
}

package "Free Compute Resources Nodes" {
    [Consumer Node 1] as FreeConsumer1
    [Consumer Node 2] as FreeConsumer2
}

[RESTful Thread API] as API

Coordinator -[hidden]right- DistProducer1
DistProducer1 -[hidden]right- DistProducer2
Autoscaler -[hidden]down- DynamicConsumer3
PubSub -[hidden]down- FreeConsumer1
FreeConsumer1 -[hidden]right- FreeConsumer2

Autoscaler -down-> PubSub : Monitor Queue Length
Autoscaler -right-> DistProducer1 : Scale In/Out
Autoscaler -right-> DistProducer2 : Scale In/Out
Autoscaler -down-> DynamicConsumer3 : Scale In/Out

Coordinator -right-> DistProducer1 : Assign Range & Manage
Coordinator -right-> DistProducer2 : Assign Range & Manage
Coordinator -down-> PubSub : System Management\n& Configuration

DistProducer1 -down-> PubSub : Publish Passwords
DistProducer2 -down-> PubSub : Publish Passwords

PubSub -down-> FreeConsumer1 : Subscribe &\nGet Passwords
PubSub -down-> FreeConsumer2 : Subscribe &\nGet Passwords
PubSub -right-> DynamicConsumer3 : Subscribe &\nGet Passwords

FreeConsumer1 -down-> API : Validate Password
FreeConsumer2 -down-> API : Validate Password
DynamicConsumer3 -down-> API : Validate Password

API -up-> FreeConsumer1 : Return Status Code
API -up-> FreeConsumer2 : Return Status Code
API -left-> DynamicConsumer3 : Return Status Code

Coordinator -[hidden]down-> [Stop Signal]
Coordinator --> [Stop Signal] : If Correct\nPassword Found

@enduml
