@startuml YouTube System Architecture
!define AWSPUML https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v14.0/dist
!includeurl AWSPUML/AWSCommon.puml

' Color scheme
skinparam BackgroundColor #1A1A1A
skinparam componentStyle uml2
skinparam component {
  BackgroundColor #2C2C2C
  BorderColor #4CAF50
  FontColor #FFFFFF
}
skinparam package {
  BackgroundColor transparent
  BorderColor #4CAF50
  FontColor #4CAF50
}
skinparam actor {
  BackgroundColor #2C2C2C
  BorderColor #4CAF50
  FontColor #FFFFFF
}
skinparam arrow {
  Color #4CAF50
  FontColor #FFFFFF
}
skinparam note {
  BackgroundColor #2C2C2C
  BorderColor #FFA500
  FontColor #FFFFFF
}

' Layout
left to right direction

' Actors and main components
actor "User\n(Browser)" as User

package "Frontend" {
  [CDN] as CDN
  [Edge Cache] as EdgeCache
}

package "Backend Layer" {
  [Load Balancer] as LoadBalancer
  [Web Server] as WebServer
  [Application Server] as AppServer
}

package "Processing Layer" {
  [Message Queue] as MQS
  [Video Processing] as VideoProcessing
  [Transcoding Server] as TranscodingServer
}

package "Data Layer" {
  [Cache] as Cache
  [Video Storage] as VideoStorage
  [NoSQL DB] as NoSQL
  [RDBMS] as RDBMS
}

' Connections
User --> CDN : 1. Request Content
CDN --> EdgeCache : 2. Check Edge Cache
CDN --> LoadBalancer : 3. Route Request
LoadBalancer --> WebServer : 4. Distribute
WebServer --> AppServer : 5. Process
AppServer --> MQS : 6. Enqueue (Upload)
MQS --> VideoProcessing : 7. Process Video
VideoProcessing --> TranscodingServer : 8. Transcode
TranscodingServer --> VideoStorage : 9. Store
AppServer --> Cache : 10. Check Cache
Cache --> VideoStorage : 11. Fetch if not cached
Cache --> RDBMS : 12. Fetch Data
Cache --> NoSQL : 13. Fetch Data
VideoStorage --> CDN : 14. Distribute Content

' Notes
note right of CDN
  Global Content Delivery Network
  for fast video streaming
end note

note right of LoadBalancer
  Auto-scaling based on traffic
  Intelligent request routing
end note

note right of VideoProcessing
  GPU-accelerated for
  efficient processing
end note

note right of Cache
  Multi-level caching strategy
  Intelligent invalidation
end note

note right of VideoStorage
  Distributed storage system
  for high availability
end note

@enduml
