@startuml YouTube_Video_Playback_Architecture

' 设置整体主题
skinparam backgroundColor #1E1E1E
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam defaultFontColor #FFFFFF
skinparam padding 5
skinparam roundCorner 10

' 定制组件样式
skinparam component {
  BackgroundColor #2C2C2C
  BorderColor #4EC9B0
  FontColor #FFFFFF
}

' 定制数据库样式
skinparam database {
  BackgroundColor #2C2C2C
  BorderColor #FF6B6B
  FontColor #FFFFFF
}

' 定制接口样式
skinparam interface {
  BackgroundColor #2C2C2C
  BorderColor #4EC9B0
  FontColor #FFFFFF
}

' 定制箭头样式
skinparam arrow {
  Color #DCDCAA
  FontColor #FFFFFF
  Thickness 1.5
}

' 定制注释样式
skinparam note {
  BackgroundColor #252526
  BorderColor #CE9178
  FontColor #FFFFFF
}

' 定义主要组件
actor "User" as user #9CDCFE
component "Video Player" as videoplayer
component "CDN" as cdn
database "Video Storage" as videostorage
component "Streaming Server" as streamingserver
database "User Preferences DB" as userprefsdb
component "Analytics Service" as analyticsservice

' 定义关系
user -> videoplayer : 1. Request video
videoplayer -> cdn : 2. Request video chunks
cdn -> videostorage : 3. Fetch video data
videostorage -> cdn : 4. Return video data
cdn -> videoplayer : 5. Stream video chunks
videoplayer -> streamingserver : 6. Request adaptive bitrate
streamingserver -> videoplayer : 7. Provide optimal bitrate
videoplayer -> userprefsdb : 8. Update watch history
videoplayer -> analyticsservice : 9. Send playback analytics

' 添加注释
note right of cdn
  Distributed globally for
  low-latency content delivery
end note

note right of streamingserver
  Handles adaptive bitrate streaming
  for optimal viewing experience
end note

note right of analyticsservice
  Collects and processes user
  engagement and performance metrics
end note

@enduml
