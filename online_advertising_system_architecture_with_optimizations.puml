@startuml Online Advertising System Architecture with Optimizations

!define RECTANGLE class
!define STORAGE database

skinparam backgroundColor #FAFAFA
skinparam handwritten false
skinparam defaultFontName Arial
skinparam defaultFontSize 14
skinparam roundCorner 10
skinparam componentStyle uml2
allowmixing


rectangle "Online Advertising System" {
    RECTANGLE "Ad Server" as adserver #D6EAF8
    RECTANGLE "Real-Time Bidding (RTB)" as rtb #D5F5E3
    RECTANGLE "User Profiling" as profiling #FDEBD0
    RECTANGLE "Ad Targeting Engine" as targeting #F5B7B1
    RECTANGLE "Campaign Manager" as campaign #D7BDE2
    RECTANGLE "Analytics Engine" as analytics #FAD7A0
    RECTANGLE "Reporting Dashboard" as dashboard #AED6F1
    
    STORAGE "User Data Store" as userdb #D6DBDF
    STORAGE "Ad Inventory" as inventory #D6DBDF
    STORAGE "Campaign Data" as campaigndb #D6DBDF
    STORAGE "Analytics Data Lake" as datalake #D6DBDF
}

actor "Ad Company" as adcompany
actor "Website/App" as website
actor "User" as user

website -[#4CAF50,thickness=2]-> adserver : <color:#4CAF50>1. Ad Request</color>
adserver -[#2196F3,thickness=2]-> rtb : <color:#2196F3>2. Bid Request</color>
rtb -[#FF5722,thickness=2]-> targeting : <color:#FF5722>3. Get Targeted Ads</color>
targeting -[#9C27B0,thickness=2]-> profiling : <color:#9C27B0>4. Get User Profile</color>
profiling -[#795548,thickness=2]-> userdb : <color:#795548>5. Fetch/Update Data</color>
targeting -[#FFC107,thickness=2]-> inventory : <color:#FFC107>6. Check Inventory</color>
rtb -[#00BCD4,thickness=2]-> adserver : <color:#00BCD4>7. Winning Bid</color>
adserver -[#E91E63,thickness=2]-> website : <color:#E91E63>8. Serve Ad</color>
website -[#9E9E9E,thickness=2]-> user : <color:#9E9E9E>9. Display Ad</color>
user -[#3F51B5,thickness=2]-> adserver : <color:#3F51B5>10. Ad Interaction</color>
adserver -[#009688,thickness=2]-> analytics : <color:#009688>11. Log Event</color>
analytics -[#FF9800,thickness=2]-> datalake : <color:#FF9800>12. Store Data</color>
analytics -[#8BC34A,thickness=2]-> dashboard : <color:#8BC34A>13. Update Metrics</color>
dashboard -[#607D8B,thickness=2]-> adcompany : <color:#607D8B>14. View Reports</color>

campaign -[#CDDC39,dashed]-> targeting : Configure Targeting
campaign -[#CDDC39,dashed]-> rtb : Set Bid Strategies
adcompany -[#CDDC39,dashed]-> campaign : Manage Campaigns

note right of targeting
  Implements advanced targeting algorithms:
  - Behavioral targeting
  - Contextual targeting
  - Demographic targeting
  - Retargeting
end note

note right of analytics
  Performs:
  - Click-through rate (CTR) analysis
  - Conversion tracking
  - Attribution modeling
  - A/B testing
end note

note bottom of datalake
  Stores:
  - User behavior data
  - Ad performance metrics
  - Campaign data
  - Conversion data
end note

@enduml
