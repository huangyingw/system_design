@startuml Distributed File System Architecture

skinparam backgroundColor #F0F0E0
skinparam handwritten false
skinparam monochrome false
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam roundCorner 10
skinparam ArrowColor #2C3E50
skinparam ArrowThickness 1.5
skinparam linetype ortho

!define RECTANGLE rectangle
!define DATABASE database

' Client nodes
rectangle "Read Client" as ReadClient #A9CCE3
rectangle "Write Client" as WriteClient #D6EAF8

' Load Balancers
RECTANGLE "Read Load Balancer" as ReadLB #F5B041 {
    component "Health Check" as ReadHealthCheck
}

RECTANGLE "Write Load Balancer" as WriteLB #FAD7A0 {
    component "Health Check" as WriteHealthCheck
}

' Caching Layer
RECTANGLE "Caching Layer" as CacheLayer #85C1E9 {
    DATABASE "Redis Cluster" as RedisCache
}

' Name Node Cluster
RECTANGLE "Name Node Cluster" as NameNodeCluster #82E0AA {
    DATABASE "Metadata Storage\n(Aurora)" as MetadataStorage
    component "File System Tree" as FSTree
    component "Block Management" as BlockMgmt
}

' Data Nodes
RECTANGLE "Data Node 1" as DataNode1 #F1948A {
    DATABASE "Data Storage 1" as DataStorage1
    component "Data Replication" as Replication1
}

RECTANGLE "Data Node 2" as DataNode2 #F1948A {
    DATABASE "Data Storage 2" as DataStorage2
    component "Data Replication" as Replication2
}

' Admin Node
RECTANGLE "Admin Node" as AdminNode #D7BDE2 {
    component "Monitoring" as Monitoring
    component "Configuration" as Config
    component "Backup Management" as BackupMgmt
}

' Block Metadata
DATABASE "Block Metadata\n(MongoDB)" as BlockMetadataDB #AED6F1

' Layout
ReadClient -[hidden]right- WriteClient
ReadClient -[hidden]down- ReadLB
WriteClient -[hidden]down- WriteLB
ReadLB -[hidden]down- CacheLayer
WriteLB -[hidden]down- CacheLayer
CacheLayer -[hidden]right- NameNodeCluster
NameNodeCluster -[hidden]right- BlockMetadataDB
DataNode1 -[hidden]right- DataNode2
AdminNode -[hidden]up- DataNode1

' Connections
ReadClient -down-> ReadLB : "1. Read Request"
WriteClient -down-> WriteLB : "1. Write Request"
ReadLB -down-> CacheLayer : "2. Check Cache"
WriteLB -down-> NameNodeCluster : "2. Route Write"
CacheLayer -right-> NameNodeCluster : "3. Cache Miss"
NameNodeCluster -down-> DataNode1 : "4. Assign Task"
NameNodeCluster -down-> DataNode2 : "4. Assign Task"
DataNode1 -up-> CacheLayer : "5. Update Cache"
DataNode2 -up-> CacheLayer : "5. Update Cache"
ReadClient .[#blue].> DataNode1 : "6. Read Data"
WriteClient .[#red].> DataNode2 : "6. Write Data"
DataNode1 <-[#green]-> DataNode2 : "7. Data Replication"
AdminNode -up-> NameNodeCluster : "8. Manage & Monitor"
AdminNode -up-> DataNode1 : "8. Manage & Monitor"
AdminNode -up-> DataNode2 : "8. Manage & Monitor"
NameNodeCluster -right-> BlockMetadataDB : "9. Store/Retrieve\nBlock Metadata"

@enduml
