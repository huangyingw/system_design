@startuml Centralized Logging System Design

!define RECTANGLE class

allowmixing

skinparam backgroundColor #FAFAFA
skinparam handwritten false
skinparam defaultFontName Arial
skinparam defaultFontSize 12
skinparam roundcorner 20
skinparam shadowing true

title Centralized Logging System Design

' 日志源
RECTANGLE "Log Sources" as Sources {
    [Application Logs]
    [System Logs]
    [Network Logs]
}

' 日志收集
RECTANGLE "Log Shipper" as Shipper {
    [File Beat]
    [Fluentd]
}

' 日志传输
queue "Kafka" as Kafka

' 日志处理
RECTANGLE "Log Processor" as Processor {
    [Logstash]
    [Stream Processor]
}

' 日志存储
database "Elasticsearch" as ES
database "Cold Storage" as ColdStorage

' 日志分析和搜索
RECTANGLE "Kibana" as Kibana {
    [Search Interface]
    [Visualization]
}

' 日志管理
RECTANGLE "Log Management" as Management {
    [Retention Policy]
    [Access Control]
    [Encryption]
}

' 用户界面
actor "Admin/User" as User

' 关系
Sources -down-> Shipper : Collect
Shipper -down-> Kafka : Ship
Kafka -down-> Processor : Consume
Processor -down-> ES : Index
ES -down-> ColdStorage : Archive
ES -right-> Kibana : Query
Kibana -up-> User : Provide UI
Management -up-> ES : Manage
Management -up-> ColdStorage : Manage

note right of Shipper
  Lightweight agents deployed on each node
  Supports various log formats
  Ensures reliable log collection and shipping
end note

note right of Processor
  Parses and enriches log data
  Performs real-time analysis
  Handles log format standardization
end note

note right of ES
  Provides fast full-text search
  Supports structured and unstructured data
  Enables real-time log analysis
end note

note right of Management
  Implements log retention policies
  Manages access control and encryption
  Ensures compliance with data regulations
end note

@enduml
